MPLS-P Configurations
This P1 Configuration

bfd-template single-hop isis
 interval min-tx 300 min-rx 300 multiplier 5

!

key chain cisco
 key 1
  key-string 0x0
  interface Loopback0
 ip address 10.1.3.1 255.255.255.255

!
interface GigabitEthernet1
 mtu 2000
 ip address 10.1.1.9 255.255.255.252
 ip router isis 1
 carrier-delay 1
 speed 1000
 no negotiation auto
 bfd template isis
 no mop enabled
 no mop sysid
 isis circuit-type level-2-only
 isis network point-to-point 
 isis authentication mode md5
 isis authentication key-chain cisco
 isis bfd
!
interface GigabitEthernet2
 mtu 2000
 ip address 10.1.1.13 255.255.255.252
 ip router isis 1
 carrier-delay 1
 speed 1000
 no negotiation auto
 bfd template isis
 no mop enabled
 no mop sysid
 isis circuit-type level-2-only
 isis network point-to-point 
 isis authentication mode md5
 isis authentication key-chain cisco
 isis bfd
!
interface GigabitEthernet3
 mtu 2000
 ip address 10.1.1.1 255.255.255.252
 ip router isis 1
 carrier-delay 1
 speed 1000
 no negotiation auto
 bfd template isis
 no mop enabled
 no mop sysid
 isis circuit-type level-2-only
 isis network point-to-point 
 isis authentication mode md5
 isis authentication key-chain cisco
 isis bfd
 !
 router isis 1
 net 49.0001.0000.0000.0001.00
 is-type level-2-only
 router-id Loopback0
 authentication mode md5 level-2
 authentication key-chain cisco level-2
 metric-style wide level-2
 no hello padding point-to-point
 log-adjacency-changes all
 passive-interface Loopback0


 This P2 Configuration

 key chain cisco
 key 1
  key-string 0x0
!
  bfd-template single-hop isis
 interval min-tx 300 min-rx 300 multiplier 5
!
interface Loopback0
 ip address 10.1.3.3 255.255.255.255
!
interface GigabitEthernet1
 mtu 2000
 ip address 10.1.1.10 255.255.255.252
 ip router isis 1
 carrier-delay 1
 speed 1000
 no negotiation auto
 bfd template isis
 no mop enabled
 no mop sysid
 isis circuit-type level-2-only
 isis network point-to-point 
 isis authentication mode md5
 isis authentication key-chain cisco
 isis bfd
!
interface GigabitEthernet2
 mtu 2000
 ip address 10.1.1.18 255.255.255.252
 ip router isis 1
 carrier-delay 1
 speed 1000
 no negotiation auto
 bfd template isis
 no mop enabled
 no mop sysid
 isis circuit-type level-2-only
 isis network point-to-point 
 isis authentication mode md5
 isis authentication key-chain cisco
 isis bfd
!
interface GigabitEthernet3
 mtu 2000
 ip address 10.1.1.5 255.255.255.252
 ip router isis 1
 carrier-delay 1
 speed 1000
 no negotiation auto
 bfd template isis
 no mop enabled
 no mop sysid
 isis circuit-type level-2-only
 isis network point-to-point 
 isis authentication mode md5
 isis authentication key-chain cisco
 isis bfd

 router isis 1
 net 49.0001.0000.0000.0003.00
 is-type level-2-only
 router-id Loopback0
 authentication mode md5 level-2
 authentication key-chain cisco level-2
 metric-style wide level-2
 no hello padding point-to-point
 log-adjacency-changes all
 passive-interface Loopback0

 Configuration check commands ; 
 P1#show isis neighbors 

Tag 1:
System Id       Type Interface     IP Address      State Holdtime Circuit Id
P2              L2   Gi3           10.1.1.2        UP    22       03
P3              L2   Gi1           10.1.1.10       UP    25       01
P4              L2   Gi2           10.1.1.14       UP    24       01

P1# show clns neighbors 
Tag 1:
System Id       Interface     SNPA                State  Holdtime  Type Protocol
P2              Gi3           5254.0019.ce2a      Up     25        L2   IS-IS
P3              Gi1           5254.0015.28c3      Up     23        L2   IS-IS
P4              Gi2           5254.0003.07e1      Up     24        L2   IS-IS

P1# show isis protocol 

Tag 1:
IS-IS Router: 1 (0x10000)
  System Id: 0000.0000.0001.00  IS-Type: level-2
  Manual area address(es): 
        49.0001
  Routing for area address(es): 
        49.0001
  Interfaces supported by IS-IS:
        GigabitEthernet2 - IP
        GigabitEthernet1 - IP
        GigabitEthernet3 - IP
  Passive interface: 
        Loopback0
  Redistribute:
    static (on by default)
  Distance for L2 CLNS routes: 110
  RRR level: none
  Generate narrow metrics: level-1
  Accept narrow metrics:   level-1
  Generate wide metrics:   level-2
  Accept wide metrics:     level-2

  P1#show isis node 

Tag 1:

ISIS level-2 node information for P1.00
  IP router ID: 10.1.3.1 (LSP #0)
  IP interface address: 10.1.3.1 (LSP #0)
  LSP index: 2
  SR capable: No, Strict-SPF capable: No

ISIS level-2 node information for P2.00
  IP interface address: 10.1.3.2 (LSP #0)
  LSP index: 1
  SR capable: No, Strict-SPF capable: No

ISIS level-2 node information for P3.00
  IP router ID: 10.1.3.3 (LSP #0)
  IP interface address: 10.1.3.3 (LSP #0)
  LSP index: 3
  SR capable: No, Strict-SPF capable: No

ISIS level-2 node information for P4.00
  IP router ID: 10.1.3.4 (LSP #0)
  IP interface address: 10.1.3.4 (LSP #0)
  LSP index: 4
  SR capable: No, Strict-SPF capable: No

ISIS level-2 node information for P5.00
  IP router ID: 10.1.3.5 (LSP #0)
  IP interface address: 10.1.3.5 (LSP #0)
  LSP index: 5
  SR capable: No, Strict-SPF capable: No